<div class="container mx-auto p-4">
  <h2 class="text-2xl font-semibold mb-4">Your CSV Downloads</h2>

  <%= button_to 'Export Orders to CSV', sellers_downloads_path, method: :post, class: "bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded mb-4" %>

  <div class="overflow-x-auto">
    <table class="min-w-full bg-white border border-gray-200 rounded-md shadow-sm">
      <thead class="bg-gray-100">
        <tr>
          <th class="text-left px-4 py-2 text-gray-600 font-medium border-b">File</th>
          <th class="text-left px-4 py-2 text-gray-600 font-medium border-b">Status</th>
          <th class="text-left px-4 py-2 text-gray-600 font-medium border-b">Requested At</th>
        </tr>
      </thead>
      <tbody>
        <% if @downloads.present? %>
          <% @downloads.each do |download| %>
            <tr class="hover:bg-gray-50">
              <td class="px-4 py-2 border-b">
                <% if download.status == 'completed' %>
                  <i class="fa-solid fa-download"></i>
                  <%= link_to 'Download', download.file_url, target: '_blank', class: "text-blue-500 hover:underline" %>
                <% else %>
                  <span class="bg-blue-100 text-blue-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded-full dark:bg-blue-900 dark:text-blue-300">N/A</span>
                <% end %>
              </td>
              <td class="px-4 py-2 border-b">
                <span class="<%= download.status == 'completed' ? 'bg-green-100 text-green-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded-full dark:bg-green-900 dark:text-green-300' : 'bg-gray-100 text-gray-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded-full dark:bg-gray-700 dark:text-gray-300' %>"><%= download.status.capitalize %></span>
              </td>
              <td class="px-4 py-2 border-b text-gray-600"><%= download.created_at.strftime("%d %b %Y %H:%M") %></td>
            </tr>
          <% end %>
        <% else %>
          <tr>
            <td colspan="3" class="px-4 py-4 text-center text-gray-500">No downloads available.</td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
